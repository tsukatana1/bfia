<!DOCTYPE html>
<title>Admin Dashboard</title>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <script src="https://code.iconify.design/1/1.0.7/iconify.min.js"></script>
</head>
<body>
    <link href="/css/admin_dash.css" rel="stylesheet" type="text/css">
    <div class="side-nav">
        <div class="buttons-div">
            <ul>
                <li><button id="accounts-redirect">Analytics</button></li>
                <li><button id="reports-redirect">Reports</button></li>
            </ul>
        </div>
        <div class="dark-mode">
            <button id="dark-mode-btn"><span class="iconify" data-icon="bi:moon" data-inline="false"></span></button> <!--Beta feature -->
        </div>
    </div>
    <div class='list-of'>
        <div class="accounts-page">
            <div class="dash">
                <h1>Website Details:</h1>
                <h3> <%= users %> people have a registered account. </h3>
            </div>
            <div class="info-table">
                <div class="weekly-ana">
                    <h2>Weekly Analytics Table:</h2>
                    <% if(userCount.length === 0) { %>
                        <p class="error-pha">Profile analytics will be updated each week. They have been recently cleared.</p>
                    <% } else { %>
                        <table>
                            <tr>
                                <th>Weeks</th>
                                <th>Donors</th>
                            </tr>
                            <% userCount.forEach(elem => { %>
                                <tr>
                                    <td> <%= elem['week'] %> </td>
                                    <td> <%= elem['number'] %> </td> 
                                </tr>
                            <% }) %>
                        </table>
                    <% } %>
                </div>
                <div class="route-ana">
                    <h2>Route Analytics:</h2>
                    <table>
                        <tr>
                            <th>Route</th>
                            <th>Visits</th>
                        </tr>
                        <% routeInfo.forEach(info => { %>
                            <tr>
                                <td> <%= info['route'] %> </td>
                                <td> <%= info['visits'] %> </td> 
                            </tr>
                        <% }); %>
                    </table>
                </div>
            </div>
            <div class="privacy-stat">
                <div class="priv-bar">
                    <p><span><%= priv_count %></span> people have marked their account as private.</p>
                </div>
                <div class="pub-bar">
                    <p><span><%= pub_count %></span> people have marked their account as public.</p>
                </div>
            </div>
        </div>
        <div class="reports-div">
            <span id="coming-soon">Reports and auditing coming soon.</span>
            <div class="reported-accs">
            </div>
            <div class="flagged-accs">
                
            </div>
        </div>
    </div>
    <script type="text/javascript" src="/js/admin.js"></script>
</body>